/*! crier 05-06-2015 */
!function(a){var b=function(a,b,c){var d,e,f=Object(a),g=f.length>>>0;for(arguments.length>1&&(d=c),e=0;g>e;){var h;e in f&&(h=f[e],b.call(d,h,e,f)),e++}},c=function(a){this.name=a,this.subs=[]};c.prototype.pub=function(){var a=[].slice.call(arguments);a.shift(),a.unshift(this.name),b(this.subs,function(b){b.fn.apply(void 0,a)},this)},c.prototype.sub=function(a){this.subs.push(a)},c.prototype.unsub=function(a){var b=this.subIndex(a);~b&&this.subs.splice(b,1)},c.prototype.clear=function(){this.subs=[]},c.prototype.subIndex=function(a){for(var b=a instanceof Function?"fn":"id",c=0;c<this.subs.length;c++)if(this.subs[c][b]===a)return c;return-1};var d=function(){this.chdir={}};d.prototype.channels=function(a){if(a instanceof RegExp){var b=[];for(var d in this.chdir)a.test(d)&&b.push(this.chdir[d]);return b}return this.chdir[a]||(this.chdir[a]=new c(a)),[this.chdir[a]]},d.prototype.pub=function(a){var c=arguments;b(this.channels(a),function(a){a.pub.apply(a,c)},this)},d.prototype.sub=function(a,c,d){b(this.channels(a),function(a){a.sub({id:d,fn:c})},this)},d.prototype.unsub=function(a,c){b(this.channels(a),function(a){a.unsub(c)},this)},d.prototype.subs=function(a){var c=[];return b(this.channels(a),function(a){c.push.apply(c,a.subs)},this),c},d.prototype.clear=function(a){b(this.channels(a),function(a){a.clear()},this)};var e=new d;a.Crier=e}(window);