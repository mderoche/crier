/*! crier 08-06-2015 */
!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.Crier=b()}(this,function(){var a=function(a,b,c){var d,e,f=Object(a),g=f.length>>>0;for(arguments.length>1&&(d=c),e=0;g>e;){var h;e in f&&(h=f[e],b.call(d,h,e,f)),e++}},b=function(a){this.name=a,this.subs=[]};b.prototype.pub=function(){var b=[].slice.call(arguments);b.shift(),b.unshift(this.name),a(this.subs,function(a){a.fn.apply(void 0,b)},this)},b.prototype.sub=function(a){this.subs.push(a)},b.prototype.unsub=function(a){if(!a)return void this.clear();var b=this.subIndex(a);~b&&this.subs.splice(b,1)},b.prototype.clear=function(){this.subs=[]},b.prototype.subIndex=function(a){for(var b=a instanceof Function?"fn":"id",c=0;c<this.subs.length;c++)if(this.subs[c][b]===a)return c;return-1};var c=function(){this.chdir={}};return c.prototype.newInstance=function(){return new c},c.prototype.channelsAsArray=function(){var a=[];for(var b in this.chdir)a.push(this.chdir[b]);return a},c.prototype.channels=function(a){if(a instanceof RegExp){var c=[];for(var d in this.chdir)a.test(d)&&c.push(this.chdir[d]);return c}return this.chdir[a]||(this.chdir[a]=new b(a)),[this.chdir[a]]},c.prototype.pub=function(b){var c=arguments;a(this.channels(b),function(a){a.pub.apply(a,c)},this)},c.prototype.sub=function(b,c,d){a(this.channels(b),function(a){a.sub({id:d,fn:c})},this)},c.prototype.unsub=function(b,c){a(this.channels(b),function(a){a.unsub(c)},this)},c.prototype.subs=function(b){var c=[];return a(this.channels(b),function(a){c.push.apply(c,a.subs)},this),c},c.prototype.clear=function(b){a(this.channels(b||/.*/),function(a){delete this.chdir[a.name]},this)},new c});var Crier=require("./crier.js");Crier.sub("channel1",function(a,b,c){console.log(a+" fired: ",b,c)}),Crier.pub("channel1",1,2);